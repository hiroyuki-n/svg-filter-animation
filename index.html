<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SVGアニメーション ジェネレーター</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/generator.css">
</head>

<body>
  <div class="generator">
    <aside class="controls">
      <h1>SVGアニメーション<br>ジェネレーター</h1>

      <section class="control-group">
        <h2>feTurbulence</h2>
        <p class="control-group-desc">ノイズパターンを生成するフィルター。波打つ効果の「元」となる模様を制御します。</p>
        <div class="control">
          <label>
            baseFrequency
            <span class="value" id="baseFrequency-value">0.02</span>
          </label>
          <input type="range" id="baseFrequency" min="0.001" max="0.2" step="0.001" value="0.02">
          <p class="control-desc">ノイズの細かさ。小さいほど滑らかでゆったり、大きいほど細かく荒い模様になります。</p>
        </div>
        <div class="control">
          <label>
            numOctaves
            <span class="value" id="numOctaves-value">3</span>
          </label>
          <input type="range" id="numOctaves" min="1" max="10" step="1" value="3">
          <p class="control-desc">ノイズの重ね合わせ数。多いほど複雑でディテールの多い模様になります。</p>
        </div>
        <div class="control">
          <label>
            type
            <span class="value" id="turbulenceType-value">fractalNoise</span>
          </label>
          <select id="turbulenceType">
            <option value="fractalNoise">fractalNoise</option>
            <option value="turbulence">turbulence</option>
          </select>
          <p class="control-desc">fractalNoiseは滑らかで柔らかいノイズ、turbulenceは荒く激しいノイズになります。</p>
        </div>
      </section>

      <section class="control-group">
        <h2>feDisplacementMap scale</h2>
        <p class="control-group-desc">ノイズに基づいて画像を変形する強さ。アニメーションは5つのキーフレーム（0%・25%・50%・75%・100%）で切り替わります。</p>
        <div class="control" data-filter="0">
          <label>Filter 0（0%） <span class="value" id="scale0-value">2</span></label>
          <input type="range" id="scale0" min="0" max="50" step="1" value="2">
          <p class="control-desc">開始時の変形量。0で変形なし。</p>
        </div>
        <div class="control" data-filter="1">
          <label>Filter 1（25%） <span class="value" id="scale1-value">6</span></label>
          <input type="range" id="scale1" min="0" max="50" step="1" value="6">
          <p class="control-desc">1/4地点の変形量。大きいほど波打ちが強く。</p>
        </div>
        <div class="control" data-filter="2">
          <label>Filter 2（50%） <span class="value" id="scale2-value">3</span></label>
          <input type="range" id="scale2" min="0" max="50" step="1" value="3">
          <p class="control-desc">中間地点の変形量。</p>
        </div>
        <div class="control" data-filter="3">
          <label>Filter 3（75%） <span class="value" id="scale3-value">4</span></label>
          <input type="range" id="scale3" min="0" max="50" step="1" value="4">
          <p class="control-desc">3/4地点の変形量。</p>
        </div>
        <div class="control" data-filter="4">
          <label>Filter 4（100%） <span class="value" id="scale4-value">3</span></label>
          <input type="range" id="scale4" min="0" max="50" step="1" value="3">
          <p class="control-desc">終了時の変形量。0にすると開始に戻る動きに。</p>
        </div>
      </section>

      <section class="control-group">
        <h2>画像</h2>
        <div class="control">
          <label class="upload-label">
            <span class="upload-btn">SVGをアップロード</span>
            <input type="file" id="svgUpload" accept=".svg,image/svg+xml" style="display:none">
          </label>
          <p class="control-desc">別の.svgファイルを読み込んでプレビュー・ダウンロードできます。</p>
        </div>
      </section>

      <section class="control-group">
        <h2>表示</h2>
        <div class="control">
          <label>
            画像の横幅（px）
            <span class="value" id="imgWidth-value">100</span>
          </label>
          <input type="range" id="imgWidth" min="40" max="300" step="5" value="100">
          <p class="control-desc">プレビューアイコンの表示サイズ。生成コードにも反映されます。</p>
        </div>
      </section>

      <section class="control-group">
        <h2>アニメーション</h2>
        <div class="control">
          <label>
            再生時間（秒）
            <span class="value" id="duration-value">0.5</span>
          </label>
          <input type="range" id="duration" min="0.1" max="3" step="0.1" value="0.5">
          <p class="control-desc">1サイクル（0%→100%）にかかる時間。短いほど速く、長いほどゆっくり動きます。</p>
        </div>
        <div class="control">
          <label>
            <input type="checkbox" id="infinite" checked>
            無限ループ
          </label>
          <p class="control-desc">オンで繰り返し再生、オフで1回のみ再生します。</p>
        </div>
      </section>

      <section class="control-group actions">
        <button type="button" id="reset">リセット</button>
      </section>
    </aside>

    <main class="preview">
      <section class="icons-section">
        <div class="heading" id="preview-heading">
          <img src="img/meteor.svg" alt="">
          <img src="img/flag.svg" alt="">
          <img src="img/serif.svg" alt="">
          <img src="img/wallet.svg" alt="">
          <img src="img/thought.svg" alt="">
          <img src="img/heart.svg" alt="">
          <img src="img/hands.svg" alt="">
          <img src="img/mail.svg" alt="">
        </div>
        <div class="uploaded-preview" id="uploaded-preview"></div>
      </section>
      <p class="hint">左のパラメータを変更するとプレビューが即座に更新されます</p>

      <section class="code-copy-section">
        <h3>HTML / CSS をコピー</h3>
        <div class="code-block">
          <p class="code-label">HTML（&lt;/body&gt;直前に配置）</p>
          <pre id="code-html"><code></code></pre>
          <button type="button" class="copy-btn" id="copy-html">コピー</button>
        </div>
        <div class="code-block">
          <p class="code-label">CSS</p>
          <pre id="code-css"><code></code></pre>
          <button type="button" class="copy-btn" id="copy-css">コピー</button>
        </div>
      </section>

      <section class="download-section">
        <h3>SVGをダウンロード</h3>
        <p class="download-hint">SMILアニメーションが埋め込まれた.svgファイル。単体でアニメーションします。</p>
        <div class="download-uploaded" id="download-uploaded-wrap" style="display:none">
          <button type="button" class="download-btn download-uploaded-btn" id="download-uploaded">アップロード画像をダウンロード</button>
        </div>
        <div class="download-buttons">
          <button type="button" class="download-btn" data-src="img/meteor.svg">meteor.svg</button>
          <button type="button" class="download-btn" data-src="img/flag.svg">flag.svg</button>
          <button type="button" class="download-btn" data-src="img/serif.svg">serif.svg</button>
          <button type="button" class="download-btn" data-src="img/wallet.svg">wallet.svg</button>
          <button type="button" class="download-btn" data-src="img/thought.svg">thought.svg</button>
          <button type="button" class="download-btn" data-src="img/heart.svg">heart.svg</button>
          <button type="button" class="download-btn" data-src="img/hands.svg">hands.svg</button>
          <button type="button" class="download-btn" data-src="img/mail.svg">mail.svg</button>
        </div>
      </section>

    </main>
  </div>

  <div id="svg-container"></div>

  <script src="js/generator.js"></script>
</body>

</html>
