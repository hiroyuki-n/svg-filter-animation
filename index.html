<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SVGアニメーション ジェネレーター</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/generator.css">
</head>

<body>
  <div class="generator">
    <aside class="controls">
      <h1>SVGアニメーション<br>ジェネレーター</h1>

      <section class="control-group preset-group">
        <h2><i class="fa-solid fa-sliders"></i> プリセット</h2>
        <div class="preset-buttons">
          <button type="button" class="preset-btn" data-preset="strength1">1</button>
          <button type="button" class="preset-btn" data-preset="strength2">2</button>
          <button type="button" class="preset-btn" data-preset="strength3">3</button>
          <button type="button" class="preset-btn" data-preset="strength4">4</button>
          <button type="button" class="preset-btn" data-preset="strength5">5</button>
        </div>
        <p class="preset-legend">1=弱い 〜 5=強い</p>
      </section>

      <section class="control-group">
        <h2><i class="fa-solid fa-wave-square"></i> feTurbulence</h2>
        <p class="control-group-desc">ノイズパターンを生成するフィルター。波打つ効果の「元」となる模様を制御します。</p>
        <div class="control">
          <label>
            <i class="fa-solid fa-sliders"></i> baseFrequency
            <span class="value" id="baseFrequency-value">0.05</span>
          </label>
          <input type="range" id="baseFrequency" min="0.001" max="0.2" step="0.001" value="0.05">
          <p class="control-desc">ノイズの細かさ。小さいほど滑らかでゆったり、大きいほど細かく荒い模様になります。</p>
        </div>
        <div class="control">
          <label>
            <i class="fa-solid fa-layer-group"></i> numOctaves
            <span class="value" id="numOctaves-value">3</span>
          </label>
          <input type="range" id="numOctaves" min="1" max="20" step="1" value="3">
          <p class="control-desc">ノイズの重ね合わせ数。多いほど複雑でディテールの多い模様になります。</p>
        </div>
        <div class="control">
          <label><i class="fa-solid fa-filter"></i> type</label>
          <div class="radio-group">
            <label class="radio-option">
              <input type="radio" name="turbulenceType" value="fractalNoise" checked>
              fractalNoise
            </label>
            <label class="radio-option">
              <input type="radio" name="turbulenceType" value="turbulence">
              turbulence
            </label>
          </div>
          <p class="control-desc">fractalNoiseは滑らかで柔らかいノイズ、turbulenceは荒く激しいノイズになります。</p>
        </div>
      </section>

      <section class="control-group">
        <h2><i class="fa-solid fa-arrows-up-down-left-right"></i> feDisplacementMap scale</h2>
        <p class="control-group-desc">ノイズに基づいて画像を変形する強さ。アニメーションは5つのキーフレーム（0%・25%・50%・75%・100%）で切り替わります。</p>
        <div class="control" data-filter="0">
          <label><i class="fa-solid fa-flag"></i> Filter 0（0%） <span class="value" id="scale0-value">2</span></label>
          <input type="range" id="scale0" min="0" max="50" step="1" value="2">
          <p class="control-desc">開始時の変形量。0で変形なし。</p>
        </div>
        <div class="control" data-filter="1">
          <label><i class="fa-solid fa-flag"></i> Filter 1（25%） <span class="value" id="scale1-value">6</span></label>
          <input type="range" id="scale1" min="0" max="50" step="1" value="6">
          <p class="control-desc">1/4地点の変形量。大きいほど波打ちが強く。</p>
        </div>
        <div class="control" data-filter="2">
          <label><i class="fa-solid fa-flag"></i> Filter 2（50%） <span class="value" id="scale2-value">3</span></label>
          <input type="range" id="scale2" min="0" max="50" step="1" value="3">
          <p class="control-desc">中間地点の変形量。</p>
        </div>
        <div class="control" data-filter="3">
          <label><i class="fa-solid fa-flag"></i> Filter 3（75%） <span class="value" id="scale3-value">4</span></label>
          <input type="range" id="scale3" min="0" max="50" step="1" value="4">
          <p class="control-desc">3/4地点の変形量。</p>
        </div>
        <div class="control" data-filter="4">
          <label><i class="fa-solid fa-flag"></i> Filter 4（100%） <span class="value" id="scale4-value">3</span></label>
          <input type="range" id="scale4" min="0" max="50" step="1" value="3">
          <p class="control-desc">終了時の変形量。0にすると開始に戻る動きに。</p>
        </div>
      </section>

      <section class="control-group">
        <h2><i class="fa-solid fa-image"></i> 画像</h2>
        <div class="control">
          <label class="upload-label" for="svgUpload">
            <span class="upload-btn"><i class="fa-solid fa-upload"></i> SVGをアップロード</span>
            <input type="file" id="svgUpload" class="visually-hidden" accept=".svg,image/svg+xml" aria-label="SVGファイルをアップロード">
          </label>
          <p class="control-desc">別の.svgファイルを読み込んでプレビュー・ダウンロードできます。</p>
        </div>
      </section>

      <section class="control-group">
        <h2><i class="fa-solid fa-display"></i> 表示</h2>
        <div class="control">
          <label>
            <i class="fa-solid fa-arrows-left-right"></i> 画像の横幅（px）
            <span class="value" id="imgWidth-value">100</span>
          </label>
          <input type="range" id="imgWidth" min="40" max="600" step="5" value="100">
          <p class="control-desc">プレビューアイコンの表示サイズ。生成コードにも反映されます。</p>
        </div>
      </section>

      <section class="control-group">
        <h2><i class="fa-solid fa-play"></i> アニメーション</h2>
        <div class="control">
          <label>
            <i class="fa-solid fa-clock"></i> 再生時間（秒）
            <span class="value" id="duration-value">0.5</span>
          </label>
          <input type="range" id="duration" min="0.1" max="3" step="0.1" value="0.5">
          <p class="control-desc">1サイクル（0%→100%）にかかる時間。短いほど速く、長いほどゆっくり動きます。</p>
        </div>
      </section>

      <section class="control-group actions">
        <button type="button" id="reset"><i class="fa-solid fa-rotate-left"></i> リセット</button>
      </section>
    </aside>

    <main class="preview">
      <section class="icons-section">
        <div class="heading" id="preview-heading"></div>
      </section>

      <div class="output-guide">
        <h4><i class="fa-solid fa-circle-question"></i> 使い分け</h4>
        <ul>
          <li><strong>HTML / CSS をコピー</strong> … 既存のWebページに組み込みたいとき。画像は別ファイルで管理。</li>
          <li><strong>SVGをダウンロード</strong> … 1つのファイルで完結させたいとき。どこにでもそのまま配置可能。</li>
        </ul>
      </div>

      <section class="code-copy-section">
        <h3><i class="fa-solid fa-code"></i> HTML / CSS をコピー</h3>
        <p class="section-desc">Webページに組み込む場合に使います。HTML（フィルター定義）を&lt;/body&gt;直前に、CSS（アニメーション）をスタイルシートに貼り付けて、既存の<code>img</code>タグに適用します。画像ファイルは別途用意してください。</p>
        <div class="code-block">
          <div class="code-label-row">
            <p class="code-label">HTML（&lt;/body&gt;直前に配置）</p>
            <button type="button" class="copy-btn" id="copy-html"><i class="fa-solid fa-copy"></i> コピー</button>
          </div>
          <pre id="code-html"><code></code></pre>
        </div>
        <div class="code-block">
          <div class="code-label-row">
            <p class="code-label">CSS</p>
            <button type="button" class="copy-btn" id="copy-css"><i class="fa-solid fa-copy"></i> コピー</button>
          </div>
          <pre id="code-css"><code></code></pre>
        </div>
      </section>

      <section class="download-section">
        <h3><i class="fa-solid fa-file-arrow-down"></i> SVGをダウンロード</h3>
        <p class="section-desc">アニメーションが埋め込まれた.svgファイルを取得します。単体で再生でき、<code>img</code>のsrc・背景画像・メール添付など、どこでもそのまま使えます。HTML/CSSの追加は不要です。</p>
        <div class="download-buttons" id="download-buttons"></div>
      </section>

    </main>
  </div>

  <div id="svg-container"></div>

  <script src="js/generator.js"></script>
</body>

</html>
